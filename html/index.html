<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
   <TITLE>MindSweeper Home Page</TITLE>
   <META name="description" content="MindSweeper game home page">
   <META name="keywords" content="minesweeper puzzle solver home">
   <META lang="en" content="text/html">
</HEAD>

<body bgcolor="#FFFFFF">

<h1 align=center>MindSweeper</h1>
<center>Last update 2003/04/25</center>

<p>Welcome to the home page for MindSweeper, yet another incarnation of
minesweeper --- everybody's favourite waste of CPU cycles!&nbsp; My
implementation's claim to fame is that it includes a game solver so that at
each move it can tell you whether or not you need to guess and/or what the
mine probabilities are.&nbsp; Or just let the computer play for you!</p>

<p>MindSweeper can be downloaded from the SourceForge <a
href="http://sourceforge.net/projects/mindsweeper">project page</a>.&nbsp;
There are both source and pre-compiled binary packages available.&nbsp;
Requires a GNU/Linux-like system with GTK2, POSIX threads, etc., etc..</p>


<h2>Status</h2>

<p>Current features:</p>
<ul>
<li>Unlimited board size (limited by screen size).</li>

<li>Adjustable cell size.</li>

<li>Four preset difficulty levels.</li>

<li>Option to analyze the game board in real-time to see if a move can be
made without guessing.</li>

<li>Option to display the probability of finding a mine in each cell based
on the information available.</li>

<li>Option to "autoplay" the game:&nbsp; to automatically make any moves
that can be made without guessing.</li>

<li>Option to autoplay a specified number of games and record the
percentage that could be completed without guessing, thereby measuring the
"playability" of a given board size and mine density.</li>

</ul>

<p>A recent copy of the TODO list:</p>
<ul>
<li>Improve the search status graphics and "odometer" numerals.</li>

<li>Split the solver into a front-end and back-end so the algorithm can be
more easily re-used.</li>

<li>Option to filter games on solvability.</li>

<li>A random number generator with a longer period would be nice.</li>

<li>Make cell graphics scale with cell size.</li>

<li>Compute the number of flags expected to be left over after each move
and use this to assign a mine probability to the non-border cells.</li>

<li>Internationalization.</li>

</ul>


<h2>Screenshots</h2>

<p>Everybody loves screenshots.</p>

<p><center><img src="screenshot.png" width=475 height=379
border=0><br><br>A difficult board to analyze, showing the result for one
cell.</center></p>


<h2>Solving Minesweeper</h2>

<p>The solver in this game uses a "brute force" approach.&nbsp; It begins
by identifying all of the unmarked cells for which information is available
and then systematically tests each possible arrangement of flags in those
cells searching for flag arrangements that are consistent with all
available information.&nbsp; As the search procedes, for each cell a count
is kept of the number of valid arrangements in which it was flagged.&nbsp;
When the search terminates, the ratio of this number to the total number of
valid arrangements gives the probability of finding a mine in that
cell.&nbsp; If this ratio is 0 then the cell can be cleared with certainty,
if the ratio is 1.0 then it can be flagged with certainty.</p>

<p>Some tricks are used in order to speed up the analysis process.&nbsp;
First of all, it is often the case that a cell can be cleared or flagged
based solely on the information available in its immediate
neighbours;&nbsp; for example a corner square with a 1 diagonally adjacent
to it.</p>
<center><img src="a_corner.png" width=83 height=71></center>
<p>A special algorithm is included in the solver for handling these cases
and it is only when this algorithm fails to identify a move that the full
brute-force search is begun.&nbsp; Another trick that is used is the
separation of the border cells into independant groups:&nbsp; groups of
cells whose flag placements do not influence each other.&nbsp; A full
solution to the problem of identifying logically independant cell groups is
as complex as actually solving the game.&nbsp;  The test that is used here
is simply to check if two cells share the same information and if they
don't then they are said to be independant.&nbsp; In this sense, it is more
accurate to say the cells are divided into "geographically distinct"
sets.&nbsp; This separation greatly reduces the number of flag permutations
that need to be searched.</p>

<p>The final trick that is used, although it is not much of trick, is to
search the permutations for valid flag arrangements using an in-order tree
traversal algorithm.&nbsp; This allows entire brances of the tree to be
ruled out early on without having to actually test each possible
permutation one-by-one.&nbsp; Consider, for example, that the border region
in the screenshot above contains 78 unmarked cells.&nbsp;  Given that there
are 50 flags remaining to be placed on the board there are, in principle,
3*10<sup>23</sup> permutations available.&nbsp; On a 1.3 GHz Pentium 3, the
solver takes approximately 87 seconds to decide that the information
available does not identify any moves with certainty --- an effective
analysis rate of 3.4*10<sup>21</sup> permutations per second or
2.7*10<sup>12</sup> permutations per CPU clock cycle.&nbsp; This is clearly
way beyond the processing capabilities of the computer and so illustrates
the efficiency with which permutations are analyzed.</p>

<p>At the same time, the solver also takes into account the fact that it is
playing on a finite field with a known total number of mines.&nbsp; This
information is used to rule out flag permutations that would excede the
number of mines and this additional restriction sometimes allows boards to
be played to completion that could not be completed otherwise.&nbsp; The
limit on the number of mines can also sometimes allow cells outside of the
border region to be played.&nbsp; By knowing, for example, that the border
cells must use all remaining flags then all other cells can be
cleared.&nbsp; Alternatively, knowing that the border cells must not use
more than some number of flags it may be necessary to flag all other
cells.</p>

<p>Overall, on modern personal computers the solver is capable of playing
the game much faster than a human which allows it to play along with the
user in real time.&nbsp; In practice, "Advanced" level boards rarely take
more than 2 seconds to play to completion on the system described above and
are most often completed with 0 still showing on the clock.</p>

<p>For some information on the minesweeper problem, check out <a
href="http://www.mat.bham.ac.uk/R.W.Kaye/minesw/minesw.htm">Richard Kaye's
Minesweeper Pages</a>.&nbsp; For another solver-equipped minefield game,
check out <a
href="http://people.freenet.de/hskopp/swinekeeper.html">Truffle-Swine
Keeper</a>.</p>

<p><hr NOSHADE WIDTH="100%"></p>

<center><A href="http://sourceforge.net"> <IMG
src="http://sourceforge.net/sflogo.php?group_id=79307&amp;type=5"
width="210" height="62" border="0" alt="SourceForge.net Logo"></A></center>

</body>
</html>
